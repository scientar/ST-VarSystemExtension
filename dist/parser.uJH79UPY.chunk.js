var t,r,e,n,o,a,i,p,c,y,u,s,f,l,d,h,g,A,E,m,b,S,P,O,v,w,R,I,x,T,M,U,k,N,F,C,j,B,D,G,L,W,Q,V,J,K,H,q,X,Y,Z,tt,rt,et,nt,ot,at,it,pt,ct,yt,ut,st,ft,lt,dt,ht,gt,At,Et,mt,bt,St,Pt,Ot,vt={exports:{}};function wt(){return r?t:(r=1,t=Object)}function Rt(){return n?e:(n=1,e=Error)}function It(){return a?o:(a=1,o=EvalError)}function xt(){return p?i:(p=1,i=RangeError)}function Tt(){return y?c:(y=1,c=ReferenceError)}function _t(){return s?u:(s=1,u=SyntaxError)}function Mt(){return l?f:(l=1,f=TypeError)}function Ut(){return h?d:(h=1,d=URIError)}function kt(){return A?g:(A=1,g=Math.abs)}function Nt(){return m?E:(m=1,E=Math.floor)}function Ft(){return S?b:(S=1,b=Math.max)}function Ct(){return O?P:(O=1,P=Math.min)}function jt(){return w?v:(w=1,v=Math.pow)}function Bt(){return I?R:(I=1,R=Math.round)}function Dt(){return T?x:(T=1,x=Number.isNaN||function(t){return t!=t})}function Gt(){if(U)return M;U=1;var t=Dt();return M=function(r){return t(r)||0===r?r:r<0?-1:1}}function Lt(){return N?k:(N=1,k=Object.getOwnPropertyDescriptor)}function Wt(){if(C)return F;C=1;var t=Lt();if(t)try{t([],'length')}catch(r){t=null}return F=t}function Qt(){if(B)return j;B=1;var t=Object.defineProperty||!1;if(t)try{t({},'a',{value:1})}catch(r){t=!1}return j=t}function Vt(){return G?D:(G=1,D=function(){if('function'!=typeof Symbol||'function'!=typeof Object.getOwnPropertySymbols)return!1;if('symbol'==typeof Symbol.iterator)return!0;var t={},r=Symbol('test'),e=Object(r);if('string'==typeof r)return!1;if('[object Symbol]'!==Object.prototype.toString.call(r))return!1;if('[object Symbol]'!==Object.prototype.toString.call(e))return!1;for(var _ in t[r]=42,t)return!1;if('function'==typeof Object.keys&&0!==Object.keys(t).length)return!1;if('function'==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var n=Object.getOwnPropertySymbols(t);if(1!==n.length||n[0]!==r)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,r))return!1;if('function'==typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(t,r);if(42!==o.value||!0!==o.enumerable)return!1}return!0})}function $t(){if(W)return L;W=1;var t='undefined'!=typeof Symbol&&Symbol,r=Vt();return L=function(){return'function'==typeof t&&('function'==typeof Symbol&&('symbol'==typeof t('foo')&&('symbol'==typeof Symbol('bar')&&r())))}}function Jt(){return V?Q:(V=1,Q='undefined'!=typeof Reflect&&Reflect.getPrototypeOf||null)}function Kt(){return K?J:(K=1,J=wt().getPrototypeOf||null)}function Ht(){if(q)return H;q=1;var t=Object.prototype.toString,r=Math.max,e=function(t,r){for(var e=[],n=0;n<t.length;n+=1)e[n]=t[n];for(var o=0;o<r.length;o+=1)e[o+t.length]=r[o];return e};return H=function(n){var o=this;if('function'!=typeof o||'[object Function]'!==t.apply(o))throw new TypeError('Function.prototype.bind called on incompatible '+o);for(var a,i=function(t,r){for(var e=[],n=r,o=0;n<t.length;n+=1,o+=1)e[o]=t[n];return e}(arguments,1),p=r(0,o.length-i.length),c=[],y=0;y<p;y++)c[y]='$'+y;if(a=Function('binder','return function ('+function(t,r){for(var e='',n=0;n<t.length;n+=1)e+=t[n],n+1<t.length&&(e+=r);return e}(c,',')+'){ return binder.apply(this,arguments); }')((function(){if(this instanceof a){var t=o.apply(this,e(i,arguments));return Object(t)===t?t:this}return o.apply(n,e(i,arguments))})),o.prototype){var u=function(){};u.prototype=o.prototype,a.prototype=new u,u.prototype=null}return a},H}function qt(){if(Y)return X;Y=1;var t=Ht();return X=Function.prototype.bind||t}function zt(){return tt?Z:(tt=1,Z=Function.prototype.call)}function Xt(){return et?rt:(et=1,rt=Function.prototype.apply)}function Yt(){if(it)return at;it=1;var t=qt(),r=Xt(),e=zt(),n=ot?nt:(ot=1,nt='undefined'!=typeof Reflect&&Reflect&&Reflect.apply);return at=n||t.call(e,r)}function Zt(){if(ct)return pt;ct=1;var t=qt(),r=Mt(),e=zt(),n=Yt();return pt=function(o){if(o.length<1||'function'!=typeof o[0])throw new r('a function is required');return n(t,e,o)}}function tr(){if(ut)return yt;ut=1;var t,r=Zt(),e=Wt();try{t=[].__proto__===Array.prototype}catch(i){if(!i||'object'!=typeof i||!('code'in i)||'ERR_PROTO_ACCESS'!==i.code)throw i}var n=!!t&&e&&e(Object.prototype,'__proto__'),o=Object,a=o.getPrototypeOf;return yt=n&&'function'==typeof n.get?r([n.get]):'function'==typeof a&&function(t){return a(null==t?t:o(t))}}function rr(){if(ft)return st;ft=1;var t=Jt(),r=Kt(),e=tr();return st=t?function(r){return t(r)}:r?function(t){if(!t||'object'!=typeof t&&'function'!=typeof t)throw new TypeError('getProto: not an object');return r(t)}:e?function(t){return e(t)}:null}function er(){if(dt)return lt;dt=1;var t=Function.prototype.call,r=Object.prototype.hasOwnProperty,e=qt();return lt=e.call(t,r)}function nr(){if(gt)return ht;var t;gt=1;var r=wt(),e=Rt(),n=It(),o=xt(),a=Tt(),i=_t(),p=Mt(),c=Ut(),y=kt(),u=Nt(),s=Ft(),f=Ct(),l=jt(),d=Bt(),h=Gt(),g=Function,A=function(t){try{return g('"use strict"; return ('+t+').constructor;')()}catch(r){}},E=Wt(),m=Qt(),b=function(){throw new p},S=E?function(){try{return b}catch(t){try{return E(arguments,'callee').get}catch(r){return b}}}():b,P=$t()(),O=rr(),v=Kt(),w=Jt(),R=Xt(),I=zt(),x={},T='undefined'!=typeof Uint8Array&&O?O(Uint8Array):t,M={__proto__:null,'%AggregateError%':'undefined'==typeof AggregateError?t:AggregateError,'%Array%':Array,'%ArrayBuffer%':'undefined'==typeof ArrayBuffer?t:ArrayBuffer,'%ArrayIteratorPrototype%':P&&O?O([][Symbol.iterator]()):t,'%AsyncFromSyncIteratorPrototype%':t,'%AsyncFunction%':x,'%AsyncGenerator%':x,'%AsyncGeneratorFunction%':x,'%AsyncIteratorPrototype%':x,'%Atomics%':'undefined'==typeof Atomics?t:Atomics,'%BigInt%':'undefined'==typeof BigInt?t:BigInt,'%BigInt64Array%':'undefined'==typeof BigInt64Array?t:BigInt64Array,'%BigUint64Array%':'undefined'==typeof BigUint64Array?t:BigUint64Array,'%Boolean%':Boolean,'%DataView%':'undefined'==typeof DataView?t:DataView,'%Date%':Date,'%decodeURI%':decodeURI,'%decodeURIComponent%':decodeURIComponent,'%encodeURI%':encodeURI,'%encodeURIComponent%':encodeURIComponent,'%Error%':e,'%eval%':eval,'%EvalError%':n,'%Float16Array%':'undefined'==typeof Float16Array?t:Float16Array,'%Float32Array%':'undefined'==typeof Float32Array?t:Float32Array,'%Float64Array%':'undefined'==typeof Float64Array?t:Float64Array,'%FinalizationRegistry%':'undefined'==typeof FinalizationRegistry?t:FinalizationRegistry,'%Function%':g,'%GeneratorFunction%':x,'%Int8Array%':'undefined'==typeof Int8Array?t:Int8Array,'%Int16Array%':'undefined'==typeof Int16Array?t:Int16Array,'%Int32Array%':'undefined'==typeof Int32Array?t:Int32Array,'%isFinite%':isFinite,'%isNaN%':isNaN,'%IteratorPrototype%':P&&O?O(O([][Symbol.iterator]())):t,'%JSON%':'object'==typeof JSON?JSON:t,'%Map%':'undefined'==typeof Map?t:Map,'%MapIteratorPrototype%':'undefined'!=typeof Map&&P&&O?O((new Map)[Symbol.iterator]()):t,'%Math%':Math,'%Number%':Number,'%Object%':r,'%Object.getOwnPropertyDescriptor%':E,'%parseFloat%':parseFloat,'%parseInt%':parseInt,'%Promise%':'undefined'==typeof Promise?t:Promise,'%Proxy%':'undefined'==typeof Proxy?t:Proxy,'%RangeError%':o,'%ReferenceError%':a,'%Reflect%':'undefined'==typeof Reflect?t:Reflect,'%RegExp%':RegExp,'%Set%':'undefined'==typeof Set?t:Set,'%SetIteratorPrototype%':'undefined'!=typeof Set&&P&&O?O((new Set)[Symbol.iterator]()):t,'%SharedArrayBuffer%':'undefined'==typeof SharedArrayBuffer?t:SharedArrayBuffer,'%String%':String,'%StringIteratorPrototype%':P&&O?O(''[Symbol.iterator]()):t,'%Symbol%':P?Symbol:t,'%SyntaxError%':i,'%ThrowTypeError%':S,'%TypedArray%':T,'%TypeError%':p,'%Uint8Array%':'undefined'==typeof Uint8Array?t:Uint8Array,'%Uint8ClampedArray%':'undefined'==typeof Uint8ClampedArray?t:Uint8ClampedArray,'%Uint16Array%':'undefined'==typeof Uint16Array?t:Uint16Array,'%Uint32Array%':'undefined'==typeof Uint32Array?t:Uint32Array,'%URIError%':c,'%WeakMap%':'undefined'==typeof WeakMap?t:WeakMap,'%WeakRef%':'undefined'==typeof WeakRef?t:WeakRef,'%WeakSet%':'undefined'==typeof WeakSet?t:WeakSet,'%Function.prototype.call%':I,'%Function.prototype.apply%':R,'%Object.defineProperty%':m,'%Object.getPrototypeOf%':v,'%Math.abs%':y,'%Math.floor%':u,'%Math.max%':s,'%Math.min%':f,'%Math.pow%':l,'%Math.round%':d,'%Math.sign%':h,'%Reflect.getPrototypeOf%':w};if(O)try{null.error}catch(J){var U=O(O(J));M['%Error.prototype%']=U}var k=function t(r){var e;if('%AsyncFunction%'===r)e=A('async function () {}');else if('%GeneratorFunction%'===r)e=A('function* () {}');else if('%AsyncGeneratorFunction%'===r)e=A('async function* () {}');else if('%AsyncGenerator%'===r){var n=t('%AsyncGeneratorFunction%');n&&(e=n.prototype)}else if('%AsyncIteratorPrototype%'===r){var o=t('%AsyncGenerator%');o&&O&&(e=O(o.prototype))}return M[r]=e,e},N={__proto__:null,'%ArrayBufferPrototype%':['ArrayBuffer','prototype'],'%ArrayPrototype%':['Array','prototype'],'%ArrayProto_entries%':['Array','prototype','entries'],'%ArrayProto_forEach%':['Array','prototype','forEach'],'%ArrayProto_keys%':['Array','prototype','keys'],'%ArrayProto_values%':['Array','prototype','values'],'%AsyncFunctionPrototype%':['AsyncFunction','prototype'],'%AsyncGenerator%':['AsyncGeneratorFunction','prototype'],'%AsyncGeneratorPrototype%':['AsyncGeneratorFunction','prototype','prototype'],'%BooleanPrototype%':['Boolean','prototype'],'%DataViewPrototype%':['DataView','prototype'],'%DatePrototype%':['Date','prototype'],'%ErrorPrototype%':['Error','prototype'],'%EvalErrorPrototype%':['EvalError','prototype'],'%Float32ArrayPrototype%':['Float32Array','prototype'],'%Float64ArrayPrototype%':['Float64Array','prototype'],'%FunctionPrototype%':['Function','prototype'],'%Generator%':['GeneratorFunction','prototype'],'%GeneratorPrototype%':['GeneratorFunction','prototype','prototype'],'%Int8ArrayPrototype%':['Int8Array','prototype'],'%Int16ArrayPrototype%':['Int16Array','prototype'],'%Int32ArrayPrototype%':['Int32Array','prototype'],'%JSONParse%':['JSON','parse'],'%JSONStringify%':['JSON','stringify'],'%MapPrototype%':['Map','prototype'],'%NumberPrototype%':['Number','prototype'],'%ObjectPrototype%':['Object','prototype'],'%ObjProto_toString%':['Object','prototype','toString'],'%ObjProto_valueOf%':['Object','prototype','valueOf'],'%PromisePrototype%':['Promise','prototype'],'%PromiseProto_then%':['Promise','prototype','then'],'%Promise_all%':['Promise','all'],'%Promise_reject%':['Promise','reject'],'%Promise_resolve%':['Promise','resolve'],'%RangeErrorPrototype%':['RangeError','prototype'],'%ReferenceErrorPrototype%':['ReferenceError','prototype'],'%RegExpPrototype%':['RegExp','prototype'],'%SetPrototype%':['Set','prototype'],'%SharedArrayBufferPrototype%':['SharedArrayBuffer','prototype'],'%StringPrototype%':['String','prototype'],'%SymbolPrototype%':['Symbol','prototype'],'%SyntaxErrorPrototype%':['SyntaxError','prototype'],'%TypedArrayPrototype%':['TypedArray','prototype'],'%TypeErrorPrototype%':['TypeError','prototype'],'%Uint8ArrayPrototype%':['Uint8Array','prototype'],'%Uint8ClampedArrayPrototype%':['Uint8ClampedArray','prototype'],'%Uint16ArrayPrototype%':['Uint16Array','prototype'],'%Uint32ArrayPrototype%':['Uint32Array','prototype'],'%URIErrorPrototype%':['URIError','prototype'],'%WeakMapPrototype%':['WeakMap','prototype'],'%WeakSetPrototype%':['WeakSet','prototype']},F=qt(),C=er(),j=F.call(I,Array.prototype.concat),B=F.call(R,Array.prototype.splice),D=F.call(I,String.prototype.replace),G=F.call(I,String.prototype.slice),L=F.call(I,RegExp.prototype.exec),W=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Q=/\\(\\)?/g,V=function(t,r){var e,n=t;if(C(N,n)&&(n='%'+(e=N[n])[0]+'%'),C(M,n)){var o=M[n];if(o===x&&(o=k(n)),void 0===o&&!r)throw new p('intrinsic '+t+' exists, but is not available. Please file an issue!');return{alias:e,name:n,value:o}}throw new i('intrinsic '+t+' does not exist!')};return ht=function(t,r){if('string'!=typeof t||0===t.length)throw new p('intrinsic name must be a non-empty string');if(arguments.length>1&&'boolean'!=typeof r)throw new p('"allowMissing" argument must be a boolean');if(null===L(/^%?[^%]*%?$/,t))throw new i('`%` may not be present anywhere but at the beginning and end of the intrinsic name');var e=function(t){var r=G(t,0,1),e=G(t,-1);if('%'===r&&'%'!==e)throw new i('invalid intrinsic syntax, expected closing `%`');if('%'===e&&'%'!==r)throw new i('invalid intrinsic syntax, expected opening `%`');var n=[];return D(t,W,(function(t,r,e,o){n[n.length]=e?D(o,Q,'$1'):r||t})),n}(t),n=e.length>0?e[0]:'',o=V('%'+n+'%',r),a=o.name,c=o.value,y=!1,u=o.alias;u&&(n=u[0],B(e,j([0,1],u)));for(var s=1,f=!0;s<e.length;s+=1){var l=e[s],d=G(l,0,1),h=G(l,-1);if(('"'===d||'\''===d||'`'===d||'"'===h||'\''===h||'`'===h)&&d!==h)throw new i('property names with quotes must have matching quotes');if('constructor'!==l&&f||(y=!0),C(M,a='%'+(n+='.'+l)+'%'))c=M[a];else if(null!=c){if(!(l in c)){if(!r)throw new p('base intrinsic for '+t+' exists, but the property is not available.');return}if(E&&s+1>=e.length){var g=E(c,l);c=(f=!!g)&&'get'in g&&!('originalValue'in g.get)?g.get:c[l]}else f=C(c,l),c=c[l];f&&!y&&(M[a]=c)}}return c},ht}function or(){if(Et)return At;Et=1;var t=nr(),r=Zt(),e=r([t('%String.prototype.indexOf%')]);return At=function(n,o){var a=t(n,!!o);return'function'==typeof a&&e(n,'.prototype.')>-1?r([a]):a}}function ar(){if(Pt)return St;Pt=1;var t,r=or(),e=function(){if(bt)return mt;bt=1;var t=Vt();return mt=function(){return t()&&!!Symbol.toStringTag}}()(),n=er(),o=Wt();if(e){var a=r('RegExp.prototype.exec'),i={},p=function(){throw i},c={toString:p,valueOf:p};'symbol'==typeof Symbol.toPrimitive&&(c[Symbol.toPrimitive]=p),t=function(t){if(!t||'object'!=typeof t)return!1;var r=o(t,'lastIndex');if(!(r&&n(r,'value')))return!1;try{a(t,c)}catch(e){return e===i}}}else{var y=r('Object.prototype.toString');t=function(t){return!(!t||'object'!=typeof t&&'function'!=typeof t)&&'[object RegExp]'===y(t)}}return St=t}var ir=(Ot||(Ot=1,function(t,r){var e=ar(),n=(r=t.exports=i).TOKEN_TYPES={LINE_COMMENT:'//',BLOCK_COMMENT:'/**/',SINGLE_QUOTE:'\'',DOUBLE_QUOTE:'"',TEMPLATE_QUOTE:'`',REGEXP:'//g'},o=r.BRACKETS={'(':')','{':'}','[':']'},a={')':'(','}':'{',']':'['};function i(t,e,n){n=n||{},e=e||r.defaultState();for(var o=n.start||0,a=n.end||t.length,i=o;i<a;){try{p(t[i],e)}catch(c){throw c.index=i,c}i++}return e}function p(t,e){if(1!==t.length)throw(s=new Error('Character must be a string of length 1')).name='InvalidArgumentError',s.code='CHARACTER_PARSER:CHAR_LENGTH_NOT_ONE',s;(e=e||r.defaultState()).src+=t;var i,p=e.isComment(),c=e.history?e.history[0]:'';switch(e.regexpStart&&('/'!==t&&'*'!=t||e.stack.pop(),e.regexpStart=!1),e.current()){case n.LINE_COMMENT:'\n'===t&&e.stack.pop();break;case n.BLOCK_COMMENT:'*'===e.lastChar&&'/'===t&&e.stack.pop();break;case n.SINGLE_QUOTE:'\''!==t||e.escaped?'\\'!==t||e.escaped?e.escaped=!1:e.escaped=!0:e.stack.pop();break;case n.DOUBLE_QUOTE:'"'!==t||e.escaped?'\\'!==t||e.escaped?e.escaped=!1:e.escaped=!0:e.stack.pop();break;case n.TEMPLATE_QUOTE:'`'!==t||e.escaped?'\\'!==t||e.escaped?'$'!==t||e.escaped?'{'===t&&e.hasDollar?e.stack.push(o[t]):(e.escaped=!1,e.hasDollar=!1):e.hasDollar=!0:(e.escaped=!0,e.hasDollar=!1):(e.stack.pop(),e.hasDollar=!1);break;case n.REGEXP:'/'!==t||e.escaped?'\\'!==t||e.escaped?e.escaped=!1:e.escaped=!0:e.stack.pop();break;default:if(t in o)e.stack.push(o[t]);else if(t in a){var s;if(e.current()!==t)throw(s=new SyntaxError('Mismatched Bracket: '+t)).code='CHARACTER_PARSER:MISMATCHED_BRACKET',s;e.stack.pop()}else'/'===c&&'/'===t?(e.history=e.history.substr(1),e.stack.push(n.LINE_COMMENT)):'/'===c&&'*'===t?(e.history=e.history.substr(1),e.stack.push(n.BLOCK_COMMENT)):'/'===t&&')'!==(i=(i=e.history).replace(/^\s*/,''))[0]&&('}'===i[0]||y(i[0])||/^\w+\b/.test(i)&&u(/^\w+\b/.exec(i)[0].split('').reverse().join('')))?(e.stack.push(n.REGEXP),e.regexpStart=!0):'\''===t?e.stack.push(n.SINGLE_QUOTE):'"'===t?e.stack.push(n.DOUBLE_QUOTE):'`'===t&&e.stack.push(n.TEMPLATE_QUOTE)}return e.isComment()||p||(e.history=t+e.history),e.lastChar=t,e}function c(){this.stack=[],this.regexpStart=!1,this.escaped=!1,this.hasDollar=!1,this.src='',this.history='',this.lastChar=''}function y(t){if(!t)return!0;switch(t.charCodeAt(0)){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:case 37:case 38:case 42:case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 33:case 61:return!0;default:return!1}}function u(t){return'if'===t||'in'===t||'do'===t||'var'===t||'for'===t||'new'===t||'try'===t||'let'===t||'this'===t||'else'===t||'case'===t||'void'===t||'with'===t||'enum'===t||'while'===t||'break'===t||'catch'===t||'throw'===t||'const'===t||'yield'===t||'class'===t||'super'===t||'return'===t||'typeof'===t||'delete'===t||'switch'===t||'export'===t||'import'===t||'default'===t||'finally'===t||'extends'===t||'function'===t||'continue'===t||'debugger'===t||'package'===t||'private'===t||'interface'===t||'instanceof'===t||'implements'===t||'protected'===t||'public'===t||'static'===t}r.parse=i,r.parseUntil=function(t,n,o){for(var a,i,c,y=(o=o||{}).start||0,u=y,s=r.defaultState();u<t.length;){if((o.ignoreNesting||!s.isNesting(o))&&(a=t,c=u,e(i=n)?i.test(a.substr(c||0)):a.substr(c||0,i.length)===i)){var f=u;return{start:y,end:f,src:t.substring(y,f)}}try{p(t[u],s)}catch(d){throw d.index=u,d}u++}var l=new Error('The end of the string was reached with no closing bracket found.');throw l.code='CHARACTER_PARSER:END_OF_STRING_REACHED',l.index=u,l},r.parseChar=p,r.defaultState=function(){return new c},c.prototype.current=function(){return this.stack[this.stack.length-1]},c.prototype.isString=function(){return this.current()===n.SINGLE_QUOTE||this.current()===n.DOUBLE_QUOTE||this.current()===n.TEMPLATE_QUOTE},c.prototype.isComment=function(){return this.current()===n.LINE_COMMENT||this.current()===n.BLOCK_COMMENT},c.prototype.isNesting=function(t){return!(t&&t.ignoreLineComment&&1===this.stack.length&&this.stack[0]===n.LINE_COMMENT||!this.stack.length)},r.isPunctuator=y,r.isKeyword=u}(vt,vt.exports)),vt.exports);function pr(t,r){if(!t||'string'!=typeof t)return[];if(!Array.isArray(r)||0===r.length)return[];const e=[];for(const o of r)if('active'===o.type&&o.enabled&&o.name)try{const r=new RegExp(`@\\.${o.name}\\s*\\(`,'g');let n=0;const a=1e3;for(;;){if(n++,n>a){console.error(`[ST-VarSystemExtension] 函数 ${o.name} 匹配次数超过 ${a}，可能存在解析问题，已中止`);break}const i=r.exec(t);if(null===i)break;const p=i.index,c=i.index+i[0].length,{argsString:y,endIndex:u}=cr(t.slice(c));if(-1===u){console.warn(`[ST-VarSystemExtension] 无法找到函数 ${o.name} 的结束括号，跳过此匹配`),r.lastIndex=c;continue}const s=yr(y).map((t=>{const r=t.trim();if(r.startsWith('"')&&r.endsWith('"'))try{return JSON.parse(r)}catch(e){return r.slice(1,-1)}if(r.startsWith('\'')&&r.endsWith('\''))try{const t=r.slice(1,-1).replace(/\\'/g,'\'').replace(/"/g,'\\"');return JSON.parse('"'+t+'"')}catch(e){return r.slice(1,-1)}if(r.startsWith('{')&&r.endsWith('}')||r.startsWith('[')&&r.endsWith(']'))try{return JSON.parse(r)}catch(n){try{return new Function('return '+r)()}catch(o){return console.warn('[ST-VarSystemExtension] 无法解析对象/数组字面量:',r),r}}return r})),f=c-p+u+1,l=t.substr(p,f);e.push({functionId:o.id,functionName:o.name,pattern:o.pattern,args:s,raw:l,index:p})}}catch(n){console.error(`[ST-VarSystemExtension] 解析函数调用失败: ${o.name}`,n)}return e.sort(((t,r)=>t.index-r.index)),e.length>0&&console.log(`[ST-VarSystemExtension] 解析到 ${e.length} 个函数调用:`,e),e}function cr(t){try{const r=ir.parseUntil(t,')');return{argsString:r.src.trim(),endIndex:r.end}}catch(r){console.error('[ST-VarSystemExtension] 提取函数参数失败:',r);const e=t.match(/^([^)]*)\)/);return e?{argsString:e[1].trim(),endIndex:e[0].length-1}:{argsString:'',endIndex:-1}}}function yr(t){if(!t||''===t.trim())return[];const r=[];let e='',n=0,o=!1,a=null,i=!1;for(let p=0;p<t.length;p++){const c=t[p];i?(e+=c,i=!1):'\\'!==c?o?c===a?(o=!1,a=null,e+=c):e+=c:'"'===c||'\''===c?(o=!0,a=c,e+=c):'('===c||'['===c||'{'===c?(n++,e+=c):')'===c||']'===c||'}'===c?(n--,e+=c):','===c&&0===n?(r.push(e.trim()),e=''):e+=c:(e+=c,i=!0)}return e.trim()&&r.push(e.trim()),r}export{cr as extractFunctionArgs,pr as parseFunctionCalls,yr as splitArguments};
//# sourceMappingURL=parser.uJH79UPY.chunk.js.map
